Titanium.UI.setBackgroundColor('#000');

var magic = [
    {title: "Fireball", description:"A fireball burns your target and blasts them back a step."},
    {title: "Shock", description: "A shock electrocutes opponents, damaging and momentarily stunning them."},
    {title: "Ice Storm", description: "A ice storm summons frozen shards that rain down destruction on your foes."},
    {title: "Vortex",description: "A vortex creates a windstorm that picks up enemies and hurls them around, preventing them from attacking and potentially knocking them into objects."},
    {title: "Force Push", description: "A force push magically propels enemies away from you. You can knock them into walls or off ledges for extra damage."}, 
    {title: "Blades", description: "Blades conjures magical swords that seek out and impale enemies."}
 ];
var weapons = [
    {title: "Swords", description: "Swords are very fast weapons, designed for quick and agile fighting styles."}, 
    {title:"Hammers", description: "Hammers do more damage than swords, but are heavier and slower to swing"}, 
    {title: "Pistols", description: "Compact and realiable, pistols have large magazines and reload quickly."}, 
    {title: "Rifles", description: "Rifles deal greater damage than pistols, but they have smaller magazines and aren/'/t as quick to reload."}
 ];

var mainWindow = Ti.UI.createWindow({
	backgroundColor: "#f5f5f5"
});

var titleView = Ti.UI.createView({
	height: 65,
	backgroundColor: "#fff",
	top: 0
});

var border = Ti.UI.createView({
	backgroundColor: "#dbdbdb",
	height: 1,
	top: titleView.height + titleView.top
});

var titleLabel = Ti.UI.createLabel({
	text: "Different Ways of Combat",
	font: {fontSize: 20, fontFamily: "Arial", fontWeight: "bold"},
	top: 30,
	width: "100%",
	textAlign: "center"
});

var combatTables = Ti.UI.createTableView({
	top: border.top + border.height
});

if(Ti.Platform.name === "iPhone OS"){
	combatTables.style = Ti.UI.iPhone.TableViewStyle.GROUPED;
}

var magicSection = Ti.UI.createTableViewSection({
	headerTitle: "Magical Attacks",
	footerTitle: "Mana Based"
});

var weaponsSection = Ti.UI.createTableViewSection({
	headerTitle: "Melee Attacks",
	footerTitle: "Stamina Based"
});
var getDetail = function(){
	var detailWindow = Ti.UI.createWindow({
		backgroundColor: "f5f5f5"
	});
	var detailTitleView = Ti.UI.createView({
	height: 65,
	backgroundColor: "#fff",
	top: 0
	});
	
	var detailBorder = Ti.UI.createView({
		backgroundColor: "#dbdbdb",
		height: 1,
		top: titleView.height + titleView.top
	});
	
	var detailTitleLabel = Ti.UI.createLabel({
		text: this.title,
		font: {fontSize: 20, fontFamily: "Arial", fontWeight: "bold"},
		top: 30,
		width: "100%",
		textAlign: "center"
	});
	
	var detailText = Ti.UI.createLabel({
		text: this.desc,
		font: {fontSize: 14, fontFamily: "Arial"},
		top: detailBorder.height + detailBorder.top + 40,
		left: 10,
		right: 10
	});
	
	var closeButton = Ti.UI.createLabel({
		text: "Close Window",
		backgroundColor: "#333",
		color: "#fff",
		height: 50,
		font: {fontSize: 12, fontFamily: "Arial"},
		width: "100%",
		bottom: 0,
		textAlign: "center"
	});
	
	var closeWindow = function(){
		detailWindow.close();
	};
	
	closeButton.addEventListener("click", closeWindow);
	
	detailTitleView.add(detailTitleLabel);
	detailWindow.add(detailTitleView, detailBorder, detailText,closeButton);
	
	detailWindow.open();
};

for(var i=0, j=magic.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: magic[i].title,
		desc: magic[i].description,
	    hasChild: true
	});
	
	if(Ti.Platform.name === "iPhone OS"){
		theRow.hasChild = false;
		theRow.hasDetail = true;
	}
	
	magicSection.add(theRow);
	theRow.addEventListener("click", getDetail);
}

for(var i=0, j=weapons.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: weapons[i].title,
		desc: weapons[i].description,
		hasChild: true
	});
	
	if(Ti.Platform.name === "iPhone OS"){
		theRow.hasChild = false;
		theRow.hasDetail = true;
	}
	
	weaponsSection.add(theRow);
	theRow.addEventListener("click", getDetail);
}

var combatSections = [magicSection, weaponsSection];

combatTables.setData(combatSections);


titleView.add(titleLabel);
mainWindow.add(titleView, border, combatTables);
mainWindow.open();
